#!/bin/bash

# !!!
#При подключении, обазательно должна быть задана переменная $GETOPTS_STRING
#GETOPTS_STRING=":mnopq:rs4:"

# Обработка опций командной строки с помощью 'getopts'.

# Попробуйте вызвать этот сценарий как:
# 'scriptname -mn'
# 'scriptname -oq qOption' (qOption может быть любой произвольной строкой.)
# 'scriptname -qXXX -r'
#
# 'scriptname -qr'    - Неожиданный результат: "r" будет воспринят как дополнительный аргумент опции "q"
# 'scriptname -q -r'  - То же самое, что и выше
#  Если опция ожидает дополнительный аргумент ("flag:"), то следующий параметр
#  в командной строке, будет воспринят как дополнительный аргумент этой опции.

getopt_parse(){
#GETOPTS_STRING=$1
#echo '$GETOPTS_STRING='$GETOPTS_STRING
echo '$@='$@
echo '$*='$*
echo '$1='$1
echo '$2='$2
echo '$3='$3
echo '$4='$4

set -- `getopt "$GETOPTS_STRING" "$@"`

NO_ARGS=0
E_OPTERROR=65

	while getopts $GETOPTS_STRING Option
	do
	echo '$option='$Option'; $OPTIND='$OPTIND'; $OPTARG='$OPTARG

		if [ "$OPTARG" ]
		then
		eval "export OPT$Option=\"$OPTARG\""
#		echo OPTARG=$OPTARG
		else
		eval "export OPT$Option=777"
		fi
	# Переход к очередному параметру командной строки.
#????
#	shift $(($OPTIND - 1))
	done
}

#getopt_parse $@

#echo '$OPT5='$OPT5
#echo '$OPT4='$OPT4
#echo '$OPTs='$OPTs
#echo '$OPTp='$OPTp

